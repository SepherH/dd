# 酒駕累犯名單整合平台 - 專案計劃

## 目前進度摘要
- 已初步查找專案內所有 Markdown 文件
- 已列出專案主要目錄結構
- 已分析 README.md、src 目錄、pdfParser.ts 及 index.ts，掌握專案結構與主要程式邏輯
- 已分析 server 與 database 配置，掌握 API、伺服器與資料庫連線流程
- 已分析爬蟲排程與 API 路由，掌握資料流與安全設計
- 已檢閱環境變數設定（.env.example），掌握系統配置需求
- 已確認 .ai/docs/technical 為適合存放技術分析與建議的目錄
- 已完成專案分析與改進建議文件撰寫並存檔於指定目錄
- 使用者決定優先完善爬蟲功能，讓服務能正確爬取並儲存資料
- 已檢閱並整理 tableCrawler 與 imageCrawler 策略細節
- 已分析 processor.js、aiService.js、scheduler.ts、config.ts，完整掌握爬蟲與資料處理流程
- 已盤點現有爬蟲系統優勢與需優先改進問題（如監理所清單設定、策略客製化、錯誤重試、資料庫統一等），待後續逐步優化
- 強烈要求每個新對話都必須使用專案內 .ai/plan.md 作為唯一進度依據（README.md 已明確說明）
- 待將所有與本專案相關的 plan.md 整合進 .ai/plan.md，並建立 .ai/plan.md 作為唯一進度紀錄

## 任務清單
- [x] 查找專案內所有 Markdown 文件
- [x] 列出專案主要目錄結構
- [x] 分析現有專案架構與程式碼品質
- [x] 確認分析與建議的 Markdown 存放位置
- [x] 彙整可改進之處並提出具體建議
- [x] 將分析與建議記錄於指定 md 文件
- [x] 梳理現有爬蟲排程與執行邏輯
- [ ] 設計並實作各監理所網站的專用爬蟲策略
- [ ] 建立資料清洗與標準化流程
- [ ] 實作資料寫入資料庫的流程與驗證
- [ ] 撰寫爬蟲錯誤處理與重試機制
- [ ] 撰寫爬蟲執行測試與驗證資料正確性
- [ ] 將現有 plan.md 全部移轉整合至 .ai/plan.md 並於 README.md 明確說明
- [ ] 建立 .ai/plan.md 作為唯一進度紀錄檔

## 目前目標
完善爬蟲功能並串接資料庫

## 爬蟲系統分析總結

### 現有架構優勢
- 採用策略模式區分表格與圖片爬蟲
- 基礎錯誤處理與日誌記錄
- 已建立資料標準化處理流程
- 整合 OpenAI API 解析圖片內容

### 需優先改進項目
1. **監理所資料來源配置**：環境變數 `DMVS_LIST` 需實際配置各監理所資訊
2. **爬蟲策略客製化**：需針對不同監理所網站結構定制選擇器和資料識別邏輯
3. **提升可靠性**：增加重試機制、網路異常處理和代理支援
4. **統一技術棧**：JS/TS 混用問題及資料庫技術選擇不一致

## 技術堆疊備註
- 後端：Bun 運行環境
- 資料庫：PostgreSQL (存在與 MariaDB、MongoDB 的配置不一致，待統一)
- 前端：React + TypeScript
- 主要開發語言：TypeScript
