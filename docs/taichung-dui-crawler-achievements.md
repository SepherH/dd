# 臺中市交通事件裁決處酒駕累犯資料爬取與解析成果

**日期**: 2025年7月9日

## 專案概述

本專案旨在從臺中市交通事件裁決處網站爬取酒駕及拒測累犯名單的PDF資料，並將其解析成結構化資料格式以便後續分析與應用。

## 已實現功能

### 1. 資料爬取模組

我們使用 Node.js + Bun 環境開發了一個完整的爬蟲模組，實現了以下功能：

- **網頁爬取**：成功從臺中市交通事件裁決處網站爬取資料頁面和PDF連結
- **多層次爬取**：實現了從主頁面→資料頁面→PDF檔案的多層次爬取策略
- **檔案下載**：支援PDF檔案下載，並以時間戳和原始檔名命名，避免重複
- **資料分類**：自動將下載的PDF檔案按年份和月份進行分類存儲
- **錯誤處理**：當無法找到PDF連結時，保存HTML備份以便後續分析和調整

### 2. PDF解析模組

我們開發了一個Python模組來解析PDF檔案中的酒駕累犯資料：

- **批量處理**：支援批量處理所有下載的PDF檔案
- **表格識別**：成功識別臺中市交通事件裁決處PDF中的表格結構
- **資料提取**：從PDF中提取「序號」、「姓名」、「違規日」、「違規條款」、「違規地點」和「違規事實」等欄位
- **多種解析策略**：實現了有表頭和無表頭兩種解析策略，提高解析成功率
- **結構化輸出**：將解析結果以JSON格式輸出，便於後續處理和分析

### 3. 資料統計與成果

- **爬取成果**：成功爬取了5個最新的酒駕累犯PDF檔案
- **解析成果**：成功解析了159筆酒駕違規記錄
- **資料分佈**：
  - 114年7月：72筆記錄
  - 114年6月：87筆記錄（來自4個不同的PDF檔案）

## 技術實現

### 1. 爬蟲技術

- **HTTP請求**：使用Axios進行網頁請求
- **HTML解析**：使用Cheerio進行HTML解析
- **檔案系統操作**：使用Node.js的fs/promises API進行檔案操作
- **正則表達式**：用於從頁面中提取特定資訊和連結
- **物件導向設計**：採用類別封裝爬蟲邏輯，提高代碼可維護性和擴展性

### 2. PDF解析技術

- **PDF讀取**：使用PyPDF2庫讀取PDF檔案
- **文本處理**：使用正則表達式和字符串操作提取結構化資訊
- **多策略解析**：實現表頭識別和無表頭解析兩種策略
- **JSON序列化**：將解析結果轉換為JSON格式

## 目錄結構

```
/
├── crawl-taichung.ts         # 爬蟲執行腳本
├── extract_pdf_data.py       # PDF解析腳本
├── data/
│   ├── raw_pdfs/             # 原始PDF檔案存放目錄
│   ├── processed/            # 按年月分類的PDF檔案
│   │   ├── 114年6月/         # 114年6月的PDF檔案
│   │   └── 114年7月/         # 114年7月的PDF檔案
│   └── extracted/            # 解析後的JSON資料
├── src/
│   └── crawler/              # 爬蟲模組
│       ├── taichungDuiCrawler.ts  # 臺中市交通事件裁決處爬蟲實現
│       └── strategies/       # 爬蟲策略
│           └── taichungCrawler.ts # 臺中爬蟲策略
└── plans/                    # 專案規劃文件
    └── taichung-dui-crawler-plan.md # 專案計劃
```

## 執行結果

```
===== 臺中市交通事件裁決處酒駕累犯資料爬蟲 =====
開始爬取臺中市交通事件裁決處酒駕累犯資料...
目錄結構已確認
找到 10 個資料頁面連結
開始處理 10 個資料頁面...
正在訪問資料頁面: https://www.traffic.taichung.gov.tw/unit/form/index-1.asp?Parser=2,18,591,,,,6506
找到 1 個PDF連結
...
已下載: /Users/sepherhsiao/Documents/Study/bun/20250708/data/raw_pdfs/114年7月3日公布酒(毒)駕及拒測累犯名單_2025-07-09T09-20-13-151Z_114年7月3日公布酒(毒)駕及拒測累犯名單.pdf
已將 114年6月19日公布酒(毒)駕及拒測累犯名單_2025-07-09T09-20-13-154Z_114年6月19日公布酒(毒)駕及拒測累犯名單.pdf 分類至 114年6月 目錄
...
爬蟲任務完成!
```

```
找到 5 個PDF檔案
處理檔案: 114年7月3日公布酒(毒)駕及拒測累犯名單_2025-07-09T09-20-13-151Z_114年7月3日公布酒(毒)駕及拒測累犯名單.pdf
...
摘要報告已輸出至: data/extracted/extraction_summary.json
共處理了 5 個PDF檔案，提取了 159 筆記錄
```

## 資料範例

以下是解析後資料的範例（節選）：

```json
{
  "raw_line": "1 石玉山 111/7/11 第35條第3項 沙鹿區中清路六段489號汽機車駕駛人駕駛汽機車，於十年內",
  "序號": "1",
  "姓名": "石玉山",
  "違規日": "111/7/11",
  "違規條款": "第35條第3項",
  "違規地點": "沙鹿區中清路六段489號",
  "違規事實": "汽機車駕駛人駕駛汽機車，於十年內 酒精濃度超過規定標準第2次(無照)"
}
```

## 後續發展方向

1. **資料庫整合**
   - 設計MariaDB資料表結構和使用 Knex.js 進行查詢
   - 將結構化資料導入資料庫
   - 實現資料去重和歷史比對

2. **定期更新機制**
   - 設置定時任務定期爬取最新資料
   - 實現增量更新，只處理新發布的資料
   - 添加錯誤通知機制

3. **擴展與優化**
   - 擴展支援其他縣市的監理所網站
   - 優化PDF解析準確率，處理特殊格式
   - 實現PDF中照片提取與識別

4. **資料視覺化與應用**
   - 開發簡易的資料視覺化介面
   - 提供API服務供第三方使用
   - 分析酒駕累犯的地區分佈和時間趨勢

## 結論

本專案已成功實現了臺中市交通事件裁決處酒駕累犯資料的爬取與解析功能。通過多層次爬取和多策略解析，我們能夠從非結構化的PDF中提取出結構化的酒駕違規記錄，為後續的資料分析和應用提供了基礎。

後續工作將著重於使用 MariaDB 和 Knex.js 進行資料庫整合、定期更新機制的建立，以及擴展至其他縣市的監理所網站，最終建立一個完整的全台灣酒駕累犯資料庫。
